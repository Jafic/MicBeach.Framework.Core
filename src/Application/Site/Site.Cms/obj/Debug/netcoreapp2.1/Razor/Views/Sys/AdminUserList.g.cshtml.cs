#pragma checksum "F:\GitHubProject\MicBeach.Framework.Core\src\Application\Site\Site.Cms\Views\Sys\AdminUserList.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "7136ba10cd8e9e670dbbdca75646cbc3d8f13d64"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Sys_AdminUserList), @"mvc.1.0.view", @"/Views/Sys/AdminUserList.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Sys/AdminUserList.cshtml", typeof(AspNetCore.Views_Sys_AdminUserList))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "F:\GitHubProject\MicBeach.Framework.Core\src\Application\Site\Site.Cms\Views\_ViewImports.cshtml"
using Site.Cms;

#line default
#line hidden
#line 2 "F:\GitHubProject\MicBeach.Framework.Core\src\Application\Site\Site.Cms\Views\_ViewImports.cshtml"
using MicBeach.Web.Mvc;

#line default
#line hidden
#line 5 "F:\GitHubProject\MicBeach.Framework.Core\src\Application\Site\Site.Cms\Views\Sys\AdminUserList.cshtml"
using MicBeach.Application.Identity.User;

#line default
#line hidden
#line 6 "F:\GitHubProject\MicBeach.Framework.Core\src\Application\Site\Site.Cms\Views\Sys\AdminUserList.cshtml"
using MicBeach.Util.Extension;

#line default
#line hidden
#line 7 "F:\GitHubProject\MicBeach.Framework.Core\src\Application\Site\Site.Cms\Views\Sys\AdminUserList.cshtml"
using MicBeach.Util.Serialize;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"7136ba10cd8e9e670dbbdca75646cbc3d8f13d64", @"/Views/Sys/AdminUserList.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"0e5000250b2a0bb9c30615591362c9282acaa0ce", @"/Views/_ViewImports.cshtml")]
    public class Views_Sys_AdminUserList : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(0, 2, true);
            WriteLiteral("\r\n");
            EndContext();
#line 2 "F:\GitHubProject\MicBeach.Framework.Core\src\Application\Site\Site.Cms\Views\Sys\AdminUserList.cshtml"
  
    ViewBag.Title = "管理账户";

#line default
#line hidden
#line 8 "F:\GitHubProject\MicBeach.Framework.Core\src\Application\Site\Site.Cms\Views\Sys\AdminUserList.cshtml"
   
    var statusValues = UserStatus.正常.GetType().GetEnumValueAndNames();

#line default
#line hidden
            BeginContext(227, 1869, true);
            WriteLiteral(@"<div id=""pc-head"" class=""container pd-0 wp-100 pdt-10 pdb-10"">
    <div class=""row pd-0 mg-0"">
        <div class=""column col-lg-11 col-md-11 col-sm-11 col-xs-11 hidden-xs lis_search pd-0"">
            <span class=""search_inputgroup""><label class=""stit"">姓名/登录名</label><span class=""sctrol""><input type=""text"" id=""search_username"" name=""search_username"" placeholder="""" class=""form-control"" /></span></span>
            <span class=""search_inputgroup""><label class=""stit"">手机/邮箱/QQ</label><span class=""sctrol""><input type=""text"" id=""search_contactkey"" name=""search_contactkey"" placeholder="""" class=""form-control w_200"" /></span></span>
            <button class=""btn btn-default ml_5 fc_3"" type=""button"" id=""search_btn""><i class=""glyphicon glyphicon-search""></i> 搜索</button>
        </div>
        <div class=""column col-lg-1 col-md-1 col-sm-1 col-xs-12 pd-0 text-right"">
            <div class=""btn-group mgr-5"">
                <button type=""button"" class=""btn btn-sm btn-blue dropdown-toggle"" data-toggle=""dropdown"" ");
            WriteLiteral(@"aria-haspopup=""true"" aria-expanded=""false"">
                    管理操作<span class=""caret""></span>
                </button>
                <ul class=""dropdown-menu left-n-38"">
                    <li><a href=""javascript:void(0)"" id=""create_btn""><i class=""glyphicon glyphicon-plus""></i> 添加用户</a></li>
                    <li><a href=""javascript:void(0)"" id=""deleteselect_btn""><i class=""glyphicon glyphicon-trash""></i> 删除选中</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div id=""pc-body"" class=""over-hidden wp-100"">
    <div id=""pc-body-inner"" class=""wp-100 hp-100"">
        <table id=""user_table"" class=""table table-striped table-bordered nowrap wp-100 bd-lw-0"" cellspacing=""0"" cellpadding=""0""></table>
    </div>
</div>

<div id=""pc-foot"" class=""wp-100 bd-t-solid bd-t-ddd bd-tw-1""></div>
");
            EndContext();
            DefineSection("Scripts", async() => {
                BeginContext(2113, 176, true);
                WriteLiteral("\r\n\r\n    <script type=\"text/javascript\">\r\n        BodyScroll = false;\r\n        var userStatusDic=new Object();\r\n        $(function () {\r\n\r\n            userStatusDic=JSON.parse(\'");
                EndContext();
                BeginContext(2290, 50, false);
#line 46 "F:\GitHubProject\MicBeach.Framework.Core\src\Application\Site\Site.Cms\Views\Sys\AdminUserList.cshtml"
                                 Write(Html.Raw(JsonSerialize.ObjectToJson(statusValues)));

#line default
#line hidden
                EndContext();
                BeginContext(2340, 3051, true);
                WriteLiteral(@"');

            //初始化数据表
            var columnConfigs=new Array();
            columnConfigs.push({ ""title"": '<input type=""checkbox"" class=""cbx_all""/>', ""targets"": 0,""data"":function ( row, type, val, meta ) {
                if(!row.SuperUser){
                    return '<input type=""checkbox"" class=""cbx_val"" value=""'+row.SysNo+'""/>';
                }
                else{
                    return '';
                }
            },width:'20px',className:'txt-center' });
            for(var i=1;i<=6;i++){
                var tit='';
                var data='';
                var width='';
                var className='';
                var render;
                switch(i){
                    case 1:
                        tit=""姓名"";
                        data=""RealName"";
                        width=""150px"";
                        break;
                    case 2:
                        tit=""登录名"";
                        data=""UserName"";
                        wi");
                WriteLiteral(@"dth=""150px"";
                        break;
                    case 3:
                        tit=""手机"";
                        data=""Mobile"";
                        width=""150px"";
                        break;
                    case 4:
                        tit=""邮箱"";
                        data=""Email""
                        break;
                    case 5:
                        tit=""状态"";
                        data=""Status"";
                        width=""50px"";
                        className=""txt-center"";
                        render=function(data, type, row, meta){
                            return userStatusDic[data];
                        }
                        break;
                    case 6:
                        tit=""添加时间"";
                        data=""CreateDate"";
                        width=""130px"";
                        className=""txt-center"";
                        render=function( data, type, row, meta ){
                            r");
                WriteLiteral(@"eturn  moment(data).format(""YYYY-MM-DD HH:mm"");
                        }
                        break;
                }
                columnConfigs.push({ ""title"":tit, ""targets"": i,""data"":data,""width"":width,""className"":className,'render':render });
            }
            columnConfigs.push({ ""title"": ""操作"", ""targets"": 7,""data"":function(row,type,val,meta){
                var menuItems=new Array();
                menuItems.push('<li><a href=""javascript:void(0)"" class=""btn_detail"" sysno=""_sysNo"" username=""_userName""><i class=""glyphicon glyphicon-list-alt""></i> 详情</a></li>'.replace('_sysNo',row.SysNo).replace('_userName',row.UserName));
                menuItems.push('<li><a href=""javascript:void(0)"" class=""btn_edit"" sysno=""_sysNo"" username=""_userName""><i class=""glyphicon glyphicon-edit""></i> 编辑</a></li>'.replace('_sysNo',row.SysNo).replace('_userName',row.UserName));
                if(!row.SuperUser){
                    switch(row.Status){
                        case ");
                EndContext();
                BeginContext(5393, 18, false);
#line 111 "F:\GitHubProject\MicBeach.Framework.Core\src\Application\Site\Site.Cms\Views\Sys\AdminUserList.cshtml"
                         Write((int)UserStatus.正常);

#line default
#line hidden
                EndContext();
                BeginContext(5412, 326, true);
                WriteLiteral(@":
                            menuItems.push('<li><a href=""javascript:void(0)"" class=""btn_unenable"" sysno=""_sysNo"" username=""_userName""><i class=""glyphicon glyphicon-eye-close""></i> 锁定</a></li>'.replace('_sysNo',row.SysNo).replace('_userName',row.UserName));
                            break;
                        case ");
                EndContext();
                BeginContext(5740, 18, false);
#line 114 "F:\GitHubProject\MicBeach.Framework.Core\src\Application\Site\Site.Cms\Views\Sys\AdminUserList.cshtml"
                         Write((int)UserStatus.锁定);

#line default
#line hidden
                EndContext();
                BeginContext(5759, 1603, true);
                WriteLiteral(@":
                            menuItems.push('<li><a href=""javascript:void(0)"" class=""btn_enable"" sysno=""_sysNo"" username=""_userName""><i class=""glyphicon glyphicon-eye-open""></i> 解锁</a></li>'.replace('_sysNo',row.SysNo).replace('_userName',row.UserName));
                            break;
                    }
                    menuItems.push('<li><a href=""javascript:void(0)"" class=""btn_auth"" sysno=""_sysNo"" username=""_userName""><i class=""glyphicon glyphicon-check""></i> 授权</a></li>'.replace('_sysNo',row.SysNo).replace('_userName',row.UserName));
                    menuItems.push('<li><a href=""javascript:void(0)"" class=""btn_delete"" sysno=""_sysNo"" username=""_userName""><i class=""glyphicon glyphicon-trash""></i> 删除</a></li>'.replace('_sysNo',row.SysNo).replace('_userName',row.UserName));
                }
                var menuString=menuItems.join('');
                return '<div class=""btn-group""><button type=""button"" class=""btn btn-blue dropdown-toggle"" data-toggle=""dropdown"" aria-haspopup=""true"" ");
                WriteLiteral(@"aria-expanded=""false"">管理 <span class=""caret""></span></button><ul class=""dropdown-menu list-dropdown-menu w-62"">'+menuString+'</ul></div>';
            },width:'62px',className:'txt-center' });
            InitDataTable({
                TableEle:'#user_table',
                ""columnDefs"":columnConfigs
            });
            SearchUser();

            //搜索事件
            $(""#search_btn"").click(function () {
                SearchUser();
            });

            //创建用户
            $(""#create_btn"").click(function () {
                OpenEditUserPage('");
                EndContext();
                BeginContext(7363, 28, false);
#line 137 "F:\GitHubProject\MicBeach.Framework.Core\src\Application\Site\Site.Cms\Views\Sys\AdminUserList.cshtml"
                             Write(Url.Action("EditUser","Sys"));

#line default
#line hidden
                EndContext();
                BeginContext(7391, 930, true);
                WriteLiteral(@"', '添加用户');
            });

            //删除用户
            $(""body"").on(""click"", "".btn_delete"", function () {
                var sysNo = $(this).attr(""sysno"");
                DeleteUser(sysNo);
            });

            //删除选中
            $(""#deleteselect_btn"").click(function () {
                var checkedValues = GetDataTableCheckedValues(""#user_table"");
                if (!checkedValues || checkedValues.length <= 0) {
                    ErrorMsg(""还没有选择要删除的信息"");
                    return;
                }
                var checkedValueString = checkedValues.join("","");
                DeleteUser(checkedValueString);
            });

            //编辑
            $(""body"").on(""click"", "".btn_edit"", function () {
                var sysNo = $.trim($(this).attr(""sysno""));
                if (sysNo == """") {
                    return;
                }
                var editUrl = '");
                EndContext();
                BeginContext(8322, 52, false);
#line 163 "F:\GitHubProject\MicBeach.Framework.Core\src\Application\Site\Site.Cms\Views\Sys\AdminUserList.cshtml"
                          Write(Url.Action("EditUser", "Sys", new { SysNo="sys_no"}));

#line default
#line hidden
                EndContext();
                BeginContext(8374, 357, true);
                WriteLiteral(@"'.replace('sys_no', sysNo);
                OpenEditUserPage(editUrl, '编辑用户');
            });
            //详情
            $(""body"").on(""click"", "".btn_detail"", function () {
                var sysNo = $.trim($(this).attr(""sysno""));
                if (sysNo == """") {
                    return;
                }
                var detailUrl = '");
                EndContext();
                BeginContext(8732, 56, false);
#line 172 "F:\GitHubProject\MicBeach.Framework.Core\src\Application\Site\Site.Cms\Views\Sys\AdminUserList.cshtml"
                            Write(Url.Action("AdminUserDetail", "Sys", new { id="sys_no"}));

#line default
#line hidden
                EndContext();
                BeginContext(8788, 363, true);
                WriteLiteral(@"'.replace('sys_no', sysNo);
                OpenEditUserPage(detailUrl, '用户详情');
            });
            //锁定
            $(""body"").on(""click"", "".btn_unenable"", function () {
                var sysNo = $.trim($(this).attr(""sysno""));
                if (sysNo == """") {
                    return;
                }
                ModifyStatus(sysNo,");
                EndContext();
                BeginContext(9153, 18, false);
#line 181 "F:\GitHubProject\MicBeach.Framework.Core\src\Application\Site\Site.Cms\Views\Sys\AdminUserList.cshtml"
                               Write((int)UserStatus.锁定);

#line default
#line hidden
                EndContext();
                BeginContext(9172, 302, true);
                WriteLiteral(@",'账户锁定后将不能登陆,确认锁定吗?');
            });
            //解锁
            $(""body"").on(""click"", "".btn_enable"", function () {
                var sysNo = $.trim($(this).attr(""sysno""));
                if (sysNo == """") {
                    return;
                }
                ModifyStatus(sysNo,");
                EndContext();
                BeginContext(9476, 18, false);
#line 189 "F:\GitHubProject\MicBeach.Framework.Core\src\Application\Site\Site.Cms\Views\Sys\AdminUserList.cshtml"
                               Write((int)UserStatus.正常);

#line default
#line hidden
                EndContext();
                BeginContext(9495, 324, true);
                WriteLiteral(@",'账户解锁后将恢复登陆,确认解锁吗?');
            });
            //修改密码
            $(""body"").on(""click"","".btn_updatepwd"",function(){
                var sysNo = $.trim($(this).attr(""sysno""));
                if (sysNo == """") {
                    return;
                }
                DialogPage({
                    url: '");
                EndContext();
                BeginContext(9820, 59, false);
#line 198 "F:\GitHubProject\MicBeach.Framework.Core\src\Application\Site\Site.Cms\Views\Sys\AdminUserList.cshtml"
                     Write(Url.Action("AdminModifyPassword", "Sys",new { sysNo="_id"}));

#line default
#line hidden
                EndContext();
                BeginContext(9879, 568, true);
                WriteLiteral(@"'.replace('_id',sysNo),
                    width: ""550px"",
                    height: ""150px"",
                    title: '修改密码',
                    ok: false,
                    cancel: null
                });
            });
        })

        //搜索管理用户
        function SearchUser() {
            var userName = $.trim($(""#search_username"").val());
            var contactName = $.trim($(""#search_contactkey"").val());
            var data = { NameMateKey: userName, ContactMateKey: contactName };
            PageSearch({
                url: '");
                EndContext();
                BeginContext(10448, 30, false);
#line 214 "F:\GitHubProject\MicBeach.Framework.Core\src\Application\Site\Site.Cms\Views\Sys\AdminUserList.cshtml"
                 Write(Url.Action("SearchUser","Sys"));

#line default
#line hidden
                EndContext();
                BeginContext(10478, 537, true);
                WriteLiteral(@"',
                data: data,
                listEle:'#user_table'
            });
        }

        //打开管理用户编辑页面
        function OpenEditUserPage(url, tit) {
            if (!url || $.trim(url) == """") {
                return;
            }
            window.top.OpenNewTabPage(url, tit);
        }

        //删除管理用户
        function DeleteUser(sysnos) {
            if (!sysnos || sysnos == """") {
                return;
            }
            ConfirmMsg('确认删除管理用户吗?', function () {
                $.post('");
                EndContext();
                BeginContext(11016, 30, false);
#line 234 "F:\GitHubProject\MicBeach.Framework.Core\src\Application\Site\Site.Cms\Views\Sys\AdminUserList.cshtml"
                   Write(Url.Action("DeleteUser","Sys"));

#line default
#line hidden
                EndContext();
                BeginContext(11046, 367, true);
                WriteLiteral(@"', { sysNos: sysnos }, function (res) {
                    ResultMsg(res);
                    if (res.Success) {
                        SearchUser();
                    }
                });
            });
        };

        //修改用户状态
        function ModifyStatus(id, status, msg) {
            ConfirmMsg(msg, function () {
                $.post('");
                EndContext();
                BeginContext(11414, 37, false);
#line 246 "F:\GitHubProject\MicBeach.Framework.Core\src\Application\Site\Site.Cms\Views\Sys\AdminUserList.cshtml"
                   Write(Url.Action("ModifyUserStatus", "Sys"));

#line default
#line hidden
                EndContext();
                BeginContext(11451, 252, true);
                WriteLiteral("\', { id: id,status:status }, function (res) {\r\n                    ResultMsg(res);\r\n                    if (res.Success) {\r\n                        SearchUser();\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    </script>\r\n\r\n");
                EndContext();
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
